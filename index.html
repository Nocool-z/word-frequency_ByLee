<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>ËØçÈ¢ëÂ∞èÂ∑•ÂÖ∑</title>
  <!-- jquery -->
  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
  <!-- vue -->
  <script src="https://cdn.bootcss.com/vue/2.5.16/vue.min.js"></script>
  <!-- bootstrap -->
  <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>

<body>
  <div id="app">
    <div class="container">
      <h3>ÁªôËÆ∏Êô¥ÂÜôÁöÑËØçÈ¢ëÂ∞èÂ∑•ÂÖ∑üòÇ</h3>
      <form>
        <div class="form-group">
          <!-- ÊñáÊú¨ -->
          <label for="text">ÊñáÊú¨</label>
          <textarea id="text" class="form-control" rows="10" v-model="text"></textarea>
        </div>
        <!-- ÂÖ≥ÈîÆËØç -->
        <div class="form-group">
          <label for="keyword">ÂÖ≥ÈîÆËØç</label>
          <input type="text" id="keyword" class="form-control" v-model:value="keyword">
        </div>
        <button class="btn btn-success" type="button" name="button" @click="test()">Êü•Êâæ</button>
      </form>
    </div>
    <div class="container" style="padding-top: 10px;">
      <div class="well" style="margin-bottom: 5px;">
        <strong>{{ keyword }}</strong>
        <span>Âá∫Áé∞ÁöÑÊÄªÊ¨°Êï∞Ôºö</span>
        <strong>{{ totalTimes }}</strong>
      </div>
      <table class="table table-hover">
        <thead>
          <th style="width: 20px;">#</th>
          <th style="width: 50px;">Ê¨°Êï∞</th>
          <th>ÂéüÂè•</th>
        </thead>
        <tbody>
          <tr v-for="(result, index) in results">
            <td>{{ index + 1 }}</td>
            <td>{{ result.times }}</td>
            <td v-html="result.origin"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    var app = new Vue({
      el: '#app',
      data: {
        text: '',
        keyword: '',
        results: [],
        totalTimes: 0,
      },
      methods: {
        test: function() {
          const self = this
          // ÈáçÁΩÆÊï∞ÊçÆ
          self.results = []
          self.totalTimes = 0
          // ‰∏öÂä°ÈÄªËæë
          let regExp = new RegExp(self.keyword, 'g')
          self.text.split('.').forEach(function(item) {
            if (item.trim().search(regExp) != -1) {
              let times = item.trim().match(regExp).length
              item = item.replace(regExp, '<code>' + self.keyword + '</code>')
              self.results.push({
                times: times,
                origin: item + '.',
              })
              self.totalTimes += times
            }
          })
        },
      },
      mounted: function() {
        const self = this
        self.text =
          '–í¬†—ç—Ç–∏ –º–∏–Ω—É—Ç—ã, –≤—Å—Ç—É–ø–∞—è –≤¬†–¥–æ–ª–∂–Ω–æ—Å—Ç—å –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ –†–æ—Å—Å–∏–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –æ—Å—Ç—Ä–æ –æ—Å–æ–∑–Ω–∞—é —Å–≤–æ—é –∫–æ–ª–æ—Å—Å–∞–ª—å–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∏–∑¬†–≤–∞—Å, –ø–µ—Ä–µ–¥ –≤—Å–µ–º –Ω–∞—à–∏–º –º–Ω–æ–≥–æ–Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –Ω–∞—Ä–æ–¥–æ–º, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –†–æ—Å—Å–∏–µ–π¬†‚Äì —Å—Ç—Ä–∞–Ω–æ–π –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω—ã—Ö –ø–æ–±–µ–¥ –∏¬†—Å–≤–µ—Ä—à–µ–Ω–∏–π, –ø–µ—Ä–µ–¥ —Ç—ã—Å—è—á–µ–ª–µ—Ç–Ω–µ–π –∏—Å—Ç–æ—Ä–∏–µ–π —Ä–æ—Å—Å–∏–π—Å–∫–æ–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏¬†–Ω–∞—à–∏–º–∏ –ø—Ä–µ–¥–∫–∞–º–∏. –ò—Ö –º—É–∂–µ—Å—Ç–≤–æ, –Ω–µ—É—Å—Ç–∞–Ω–Ω—ã–π —Ç—Ä—É–¥, –Ω–µ–ø–æ–±–µ–¥–∏–º–æ–µ –µ–¥–∏–Ω—Å—Ç–≤–æ, —Å–≤—è—â–µ–Ω–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫¬†—Ä–æ–¥–Ω–æ–π –∑–µ–º–ª–µ¬†‚Äì –≤–µ—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç–∏ –û—Ç—á–∏–∑–Ω–µ.'
        self.keyword = '–ø–µ—Ä–µ–¥'
      },
    })
  </script>
</body>

</html>